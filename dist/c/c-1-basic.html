<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta charset="utf-8"><title>基础语法 - Android NDK开发之旅</title><meta name="description" content=""><meta name="author" content=""><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><link rel="stylesheet" href="../assets/css/bulma.min.css"><link rel="stylesheet" href="../assets/css/app.css"><!--[if lt IE 9]>
<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]--><link rel="shortcut icon" href=""></head><body dir="ltr"><nav class="columns navbar"><div class="column logo is-3 is-offset-1"><a class="is-brand" href="../index.html">Android NDK开发之旅</a></div></nav><div class="columns content"><div class="column is-2-desktop is-3-widescreen is-hidden-touch"></div><div class="column article-container is-11-tablet is-8-desktop is-6-widescreen"><div class="breadcrumb-area"><a href="../index.html" class="breadcrumb-item">Home</a><span class="breadcrumb-delimiter"> &gt; </span><a href="../c/index.html" class="breadcrumb-item">C语言基础</a><span class="breadcrumb-delimiter"> &gt; </span><a href="../c/c-1-basic.html" class="breadcrumb-item">基础语法</a></div><h1 class="article-title">基础语法</h1><div class="article"><p>我们知道 ， Android系统是基于linux开发 ， 采用的是linux内核 ， Android APP开发大部分也要和系统打交道 ， 只是Android FrameWork 帮我们屏蔽了系统操作 ， 我们从Android 系统的分成结构可以看出 ， Android FrameWork是通过JNI与底层的C/C++库交互 ， 例如：FreeType ，OpenGL ，SQLite ， 音视频等等 。</p><figure><img src="http://upload-images.jianshu.io/upload_images/643851-e630d23b3a0ff53d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Android_Framework.png"><figcaption>Android_Framework.png</figcaption></figure><p>做Android为什么需要学习C/C++ ?</p><pre><code>1. 企业需要 ， 现在大部分招聘 ， 基本上都会要求会JNI
2. 进阶需要 ， 如果想要研究Android源码 ， 那么不会C/C++ ， 行不通
3. 音视频时代到来 （直播） ， 音视频处理 ， 很大部分都需要C/C++完成（音视频编解码）
</code></pre><p>那么下面就一起开始学习C吧 ！ let's go</p><h3 id="c语言中的变量">C语言中的变量 <a class="markdownIt-Anchor" href="#c语言中的变量">#</a></h3><p>编写C的时候 , 首先我们需要引入头文件 ， 就像我们写JAVA的时候 ， 需要引入包一样 ， 但C语言他不会帮你自动引入 ， 所有头文件 ， 必须你自己手动引入， 最常用的两个头文件是</p><pre class="hljs"><code>
    <span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
    <span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

</code></pre><blockquote><p>C语言中的xxx.h的头文件 ， 里面只有函数声明 ， 没有函数实现 ， 函数实现都在xxx.c里面 。</p></blockquote><p>在学习一门语言的时候 ， 我们最先了解的就是变量 ， 变量的定义 ， 变量所占大小 ， 下面我们看看C语言中的变量类型 ， 和变量大小 。 和JAVA不同的是 ， C语言变量的大小 ， 是随着操作系统变化而变化的 ， 不同的操作系统 ， 变量的大小可能不一样 。</p><p>下面我们来查看C语言的变量类型和变量类型的大小：</p><pre class="hljs"><code>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    
        <span class="hljs-keyword">int</span> i = <span class="hljs-number">90</span>;
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"int 所占字节：%d\n"</span>, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>));
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">" i 的值：%d\n"</span>, i);
        
        <span class="hljs-keyword">short</span> sh = <span class="hljs-number">32</span>;
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"short 所占字节数：%d\n"</span>, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">short</span>));
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"sh 的值：%d\n"</span>, sh);
    
        <span class="hljs-keyword">long</span> l = <span class="hljs-number">12312</span>;
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"long 所占字节数：%d\n"</span>, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">long</span>));
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"l 的值：%ld\n"</span>, l);
    
        <span class="hljs-keyword">float</span> f = <span class="hljs-number">12.3</span>;
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"float 所占字节数：%d\n"</span>, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">float</span>));
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"f 的值：%f\n"</span>, f);
    
        <span class="hljs-keyword">double</span> d = <span class="hljs-number">234.345</span>;
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"double 所占字节数：%d\n"</span>, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">double</span>));
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"d 的值：%lf\n"</span>, d);
    
        <span class="hljs-keyword">char</span> c = <span class="hljs-string">'c'</span>;
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"char 所占字节数：%d\n"</span>, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">char</span>));
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"c 的值：%c\n"</span>, c);
    
        <span class="hljs-comment">// 输出字符串</span>
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"输出字符串：%s\n"</span>, <span class="hljs-string">"我是输出的字符串"</span>);
    
        <span class="hljs-comment">// 输出八进制</span>
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"输出八进制：%#o\n"</span>, <span class="hljs-number">023</span>);
    
        <span class="hljs-comment">// 输出十六进制</span>
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"输出十六进制：%#x\n"</span>, <span class="hljs-number">0x23443</span>);
    
        <span class="hljs-comment">// 屏幕暂停，不立即关闭</span>
        system(<span class="hljs-string">"pause"</span>);

}

</code></pre><blockquote><p>在使用<code>printf()</code>函数的时候 ， 需要标明输出数据的类型 ， 例如:<code>int</code>类型是<code>%d</code>,<code>char</code>类型是<code>%c</code>, <code>\n</code>表示换行 等等：</p></blockquote><pre class="hljs"><code>
    <span class="hljs-comment">/*
        
        C 语言的基本数据类型 , 输出占位符
    
        int - %d 
        short - %d 
        long - %ld 
        float - %f 
        double - %lf 
        char - %c
        字符串 - %s
        八进制 - %o
        十六进制 - %x

    */</span>    

</code></pre><h3 id="c语言中的指针">C语言中的指针 <a class="markdownIt-Anchor" href="#c语言中的指针">#</a></h3><p>C语言中最重要的 ， 就是指针了 ， 没有指针 ， 就没有高级语言的那些强大的特性 ， 说到指针我们就会想到内存操作 ， 指针就是为了操作内存而生 。</p><p>下面我们来看看 ， 指针的简单使用：</p><pre class="hljs"><code>
    <span class="hljs-comment">// 定义一个变量i , i的值是100</span>
    <span class="hljs-keyword">int</span> i = <span class="hljs-number">100</span>;

    <span class="hljs-comment">// 定义一个int类型的指针 p , 指针p存储的是i变量的地址值</span>
    <span class="hljs-keyword">int</span> *p = &amp;i; <span class="hljs-comment">// &amp; 符号是取变量的地址值</span>

</code></pre><blockquote><p>指针存储的是变量的内存地址 , 也只能存储内存地址 ， 直接赋值整数值也会被转化成内存地址</p></blockquote><p>下面我们来看一个完整的例子：</p><pre class="hljs"><code>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{

        <span class="hljs-comment">// 定义一个变量i , i的值是100</span>
        <span class="hljs-keyword">int</span> i = <span class="hljs-number">100</span>;
        <span class="hljs-comment">// 定义一个int类型的指针 p , 指针p存储的是i变量的地址值</span>
        <span class="hljs-keyword">int</span> *p = &amp;i; <span class="hljs-comment">// &amp; 符号是取变量的地址值</span>
    
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"i 的地址：%#x\n"</span>, &amp;i);
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"i 的地址：%#x\n"</span>, p);
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"i 的值: %d\n"</span>, *p);
    
    
        system(<span class="hljs-string">"pause"</span>);

    }

</code></pre><p>如果使用的是Visual Studio开发工具 ， 可以在在代码中打一个断点，在菜单栏<code>调试-&gt;窗口-&gt;内存-&gt;内存1</code> , 将打印出的变量地址值 ， 在输入栏中填入 ， 按回车键进行地址搜索 。如果是一堆问号或者乱码 ， 则在该窗口点击右键 ，在右键菜单中， 选择按照你打印的变量的进制位显示 ， 例如int 就按4进制位显示 ， 再在右键菜单栏中找到带符号显示 ， 基本上就能看到变量的值了 。</p><p>上述的例子中 ， 如果我们想修改i的值 ， 除了给i直接赋值外 ， 还可以通过指针来操作，如下：</p><pre class="hljs"><code>
    定义一个变量i , i的值是<span class="hljs-number">100</span>
    <span class="hljs-keyword">int</span> i = <span class="hljs-number">100</span> ;

    <span class="hljs-comment">// 定义一个int类型的指针 p , 指针p存储的是i变量的地址值</span>
    <span class="hljs-keyword">int</span>* p = &amp;i ;
    
    <span class="hljs-comment">// 通过*p 我们操作i变量 ， 给i变量赋值20</span>
    *p = <span class="hljs-number">20</span> ;

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"i的值 = %d\n"</span>,i) ;

</code></pre><blockquote><p>指针也是一个变量 ， 如上<code>int* p = &amp;i</code> , p就是一个指针变量 ， 这个变量存储的就是i变量的内存地址 ， 通过<code>printf(&quot;p的值：%#x\n&quot;,p) printf(&quot;i的地址:%#x\n&quot;,&amp;i)</code> ， 我们可以打印出指针变量p的值和i变量地址 ， 可以看到两个值是一致的 。 那么指针和普通变量有什么区别呢 ？ 指针变量的强大之处就在于 ， 他能通过内存地址去操作对应内存地址的内容 。上述例子中<code>*p = 20</code> ， 就是操作i变量的地址 ， 将i变量中的100修改为20 。</p></blockquote><p>我们了解了指针的概念和基本使用 ， 下次我们就要了解 ， 二级指针 ， 多级指针 ， 函数指针 等等 ， 由此 ， 我们可以看出 ， C语言的世界， 就是一个指针的世界 ， 就如同JAVA的世界 ， 就是一个对象的世界一样 ， 两者都是其各自的核心 ， 所以我们一定要把指针弄懂 ， 学透 。</p></div><div dir="ltr" class="level article-bar is-mobile"><div class="level-item has-text-centered"><a title="previous page" class="previouse-article-link" href="../c/index.html"><span class="icon icon-previous" data-icon="previous"></span><span class="link-content">&laquo; Previous</span></a></div><div class="level-item has-text-centered"><a title="font size" class="link-item link-item-size"><span class="icon icon-size" data-icon="size"></span></a></div><div class="level-item has-text-centered"><a title="table of content" class="link-item link-item-toc"><span class="icon icon-toc" data-icon="toc"></span></a></div><div class="level-item has-text-centered"><a title="top" href="#"><span class="icon icon-up" data-icon="up"></span> <span class="link-content">⤊ Top</span></a></div><div class="level-item has-text-centered"><a title="next page" class="next-article-link" href="../c/c-2-pointer.html"><span class="icon icon-next" data-icon="next"></span><span class="link-content">Next &raquo;</span></a></div></div></div><div class="column is-2-widescreen is-hidden"></div></div><div class="columns foot"><div class="column is-3 is-offset-9 build-by">Build by <a href="https://github.com/ruanyf/loppo" target="_blank">Loppo</a> 0.6.15</div></div><div class="book-toc notification is-warning is-hidden"><h3>Table of chapters &nbsp;<span class="title-close"><a class="button is-danger"> Close</a></span></h3><ul class="chapter-area"><li class="chapter-item"><a href="../c/index.html">C语言基础</a>&nbsp;<a class="first-level-collapse"><span class="icon icon-collapse" data-icon="collapse"></span></a></li><ul class="chapter-level-1 chapter-level-1-current"><li class="chapter-item chapter-item-current"><a href="../c/c-1-basic.html">基础语法</a></li><li class="chapter-item"><a href="../c/c-2-pointer.html">指针内存分析</a></li><li class="chapter-item"><a href="../c/c-3-func-2pointer.html">函数与二级指针</a></li><li class="chapter-item"><a href="../c/c-4-func-pointer.html">函数指针</a></li><li class="chapter-item"><a href="../c/c-5-dynamic-m.html">动态内存分配</a></li><li class="chapter-item"><a href="../c/c-6-str-op.html">字符操作</a></li><li class="chapter-item"><a href="../c/c-7-struct-pointer.html">结构体与指针</a></li><li class="chapter-item"><a href="../c/c-8-file-io.html">文件IO</a></li><li class="chapter-item"><a href="../c/c-9-enum.html">联合体与枚举</a></li><li class="chapter-item"><a href="../c/c-10-jni.html">预编译及jni-h分析</a></li></ul><li class="chapter-item"><a href="../cpp/index.html">C++基础</a>&nbsp;<a class="first-level-collapse"><span class="icon icon-expand" data-icon="expand"></span></a></li><ul class="chapter-level-1"><li class="chapter-item"><a href="../cpp/cpp-1-namespace-struct-ref.html">命名空间结构体和引用</a></li><li class="chapter-item"><a href="../cpp/cpp-2-constructor-copy_func.html">构造函数，析构函数，拷贝构造函数</a></li><li class="chapter-item"><a href="../cpp/cpp-3-oop.html">new对象，继承，友元函数，函数的可变参数</a></li><li class="chapter-item"><a href="../cpp/cpp-4-template-exception.html">多态，模板，异常</a></li></ul><li class="chapter-item"><a href="../jni/index.html">Java与C通信的桥梁-JNI</a>&nbsp;<a class="first-level-collapse"><span class="icon icon-expand" data-icon="expand"></span></a></li><ul class="chapter-level-1"><li class="chapter-item"><a href="../jni/jni-1-basic.html">JNI概念及开发流程</a></li><li class="chapter-item"><a href="../jni/jni-2-h-file.html">头文件分析</a></li><li class="chapter-item"><a href="../jni/jni-3-call-java-field-method.html">C语言调用Java字段与方法</a></li><li class="chapter-item"><a href="../jni/jni-4-call-constructor-method.html">C语言调用构造方法</a></li><li class="chapter-item"><a href="../jni/jni-5-ref-handle.html">对象引用的处理</a></li></ul><li class="chapter-item"><a href="../ndk/index.html">Android NDK编写</a>&nbsp;<a class="first-level-collapse"><span class="icon icon-expand" data-icon="expand"></span></a></li><ul class="chapter-level-1"><li class="chapter-item"><a href="../ndk/ndk-1-as-ndk.html">使用Android-Studio编写NDK</a></li><li class="chapter-item"><a href="../ndk/ndk-2-file-split-join.html">文件加密解密与分割合并</a></li><li class="chapter-item"><a href="../ndk/ndk-3-update-1.html">增量更新之服务器端生成差分包</a></li><li class="chapter-item"><a href="../ndk/ndk-4-update-2.html">增量更新之客户端合并差分包</a></li><li class="chapter-item"><a href="../ndk/ndk-5-conf.html">基于已有项目的NDK环境配置</a></li></ul></ul></div><div class="progress-indicator"></div><!-- SCRIPTS --><script>var LOPPO={current_path:"c/c-1-basic.md",relative_root_path:"../",article_toc:'<ul class="markdownIt-TOC">\n<li>\n<ul>\n<li><a href="#c%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E5%8F%98%E9%87%8F">C语言中的变量</a></li>\n<li><a href="#c%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E6%8C%87%E9%92%88">C语言中的指针</a></li>\n</ul>\n</li>\n</ul>\n'}</script><script src="../assets/js/app.js"></script></body></html>